<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Config Processing From Python &mdash; GalSim 2.4.8 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The HSM Module" href="hsm.html" />
    <link rel="prev" title="The galsim Executable" href="config_galsim.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> GalSim
          </a>
              <div class="version">
                2.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Images and Related Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="sb.html">Surface Brightness Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromatic.html">Wavelength-dependent Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="wcs.html">World Coordinate Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="random.html">Noise and Random Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="wl.html">Weak Lensing</a></li>
<li class="toctree-l1"><a class="reference internal" href="photon.html">Photon Shooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Helper Functions and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">Errors and Warnings</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="config.html">The Config Module</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config_top.html">Top Level Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_objects.html">Config Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_stamp.html">Config Stamp Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_image.html">Config Image Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_input.html">Config Input Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_output.html">Config Output Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_values.html">Config Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_special.html">Special Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_special.html#special-specifications">Special Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_galsim.html">The galsim Executable</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Config Processing From Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-whole-script">Running the Whole Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-files">Building Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-images">Building Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-stamps">Building Stamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-objects">Building Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-values">Generating Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-input-fields">Using Input Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processing-extra-outputs">Processing Extra Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#config-utilities">Config Utilities</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hsm.html">The HSM Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="des.html">The DES Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="roman.html">The Roman Space Telescope Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp.html">C++ Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared.html">Shared Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Revision History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GalSim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="config.html">The Config Module</a> &raquo;</li>
      <li>Config Processing From Python</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/config_process.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="config-processing-from-python">
<h1>Config Processing From Python<a class="headerlink" href="#config-processing-from-python" title="Permalink to this headline">¶</a></h1>
<p>It is also possible to run the config processing from a Python script, rather than using
<a class="reference internal" href="config_galsim.html#the-galsim-executable"><span class="std std-ref">The galsim Executable</span></a>.  An example of this can be found in
<a class="reference download internal" download="" href="_downloads/6ad302df39711687604bb7971a0b3f9b/demo8.py"><code class="xref download docutils literal notranslate"><span class="pre">demo8</span></code></a>.</p>
<div class="section" id="running-the-whole-script">
<h2>Running the Whole Script<a class="headerlink" href="#running-the-whole-script" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to running the whole config script from Python:</p>
<dl class="py function">
<dt id="galsim.config.ReadConfig">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ReadConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/process.html#ReadConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ReadConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a configuration file and return the corresponding dicts.</p>
<p>A YAML file is allowed to define several dicts using multiple documents. The GalSim parser
treats this as a set of multiple jobs to be done.  The first document is taken to be a “base”
dict that has common definitions for all the jobs.  Then each subsequent document has the
(usually small) modifications to the base dict for each job.  See demo6.yaml, demo8.yaml and
demo9.yaml in the GalSim/examples directory for example usage.</p>
<p>On output, the returned list will have an entry for each job to be done.  If there are
multiple documents, then the first dict is a merge of the first two documents, the
second a merge of the first and third, and so on.  Each job includes the first document
merged with each subseqent document in turn.  If there is only one document defined,
the returned list will have one element, which is this dict.</p>
<p>A JSON file does not have this feature, but to be consistent, we always return a list,
which would only have one element in this case.</p>
<p>Also, we actually read in the config file into an OrderedDict.  The main advantage of
this is for the truth catalog.  This lets the columns be in the same order as the entries
in the config file.  With a normal dict, they get scrambled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_file</strong> – The name of the configuration file to read.</p></li>
<li><p><strong>file_type</strong> – If given, the type of file to read.  [default: None, which mean
infer the file type from the extension.]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of config dicts</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.CopyConfig">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">CopyConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#CopyConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.CopyConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>If you want to use a config dict for multiprocessing, you need to deep copy
the gal, psf, and pix fields, since they cache values that are not picklable.
If you don’t do the deep copy, then python balks when trying to send the updated
config dict back to the root process.  We do this a few different times, so encapsulate
the copy semantics once here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The configuration dict to copy.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a deep copy of the config dict.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ImportModules">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ImportModules</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/process.html#ImportModules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ImportModules" title="Permalink to this definition">¶</a></dt>
<dd><p>Import any modules listed in config[‘modules’].</p>
<p>These won’t be brought into the running scope of the config processing, but any side
effects of the import statements will persist.  In particular, these are allowed to
register additional custom types that can then be used in the current config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The configuration dict.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ProcessTemplate">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ProcessTemplate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/process.html#ProcessTemplate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ProcessTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>If the config dict has a ‘template’ item, read in the appropriate file and
make any requested updates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>base</strong> – The base configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ProcessAllTemplates">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ProcessAllTemplates</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/process.html#ProcessAllTemplates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ProcessAllTemplates" title="Permalink to this definition">¶</a></dt>
<dd><p>Check through the full config dict and process any fields that have a ‘template’ item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>base</strong> – The base configuration dict. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.Process">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">Process</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">njobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">except_abort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/process.html#Process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.Process" title="Permalink to this definition">¶</a></dt>
<dd><p>Do all processing of the provided configuration dict.  In particular, this
function handles processing the output field, calling other functions to
build and write the specified files.  The input field is processed before
building each file.</p>
<p>Sometimes, it can be helpful to split up a processing jobs over multiple machines
(i.e. not just multiple processes, which can be handled natively with the output.nproc
or image.nproc options).  In this case, you can ask the Process command to split up
the total amount of work into njobs and only do one of those jobs here.  To do this,
set njobs to be the number of jobs total and job to be which job should be done here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>njobs</strong> – The total number of jobs to split the work into. [default: 1]</p></li>
<li><p><strong>job</strong> – Which job should be worked on here (1..njobs). [default: 1]</p></li>
<li><p><strong>new_params</strong> – A dict of new parameter values that should be used to update the config
dict after any template loading (if any). [default: None]</p></li>
<li><p><strong>except_abort</strong> – Whether to abort processing when a file raises an exception (True)
or just report errors and continue on (False). [default: False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the final config dict that was used.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="building-files">
<h2>Building Files<a class="headerlink" href="#building-files" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to building one or more files as specified by a config
dict:</p>
<dl class="py function">
<dt id="galsim.config.BuildFiles">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildFiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nfiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">except_abort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/output.html#BuildFiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a number of output files as specified in config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nfiles</strong> – The number of files to build.</p></li>
<li><p><strong>config</strong> – A configuration dict.</p></li>
<li><p><strong>file_num</strong> – If given, the first file_num. [default: 0]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>except_abort</strong> – Whether to abort processing when a file raises an exception (True)
or just report errors and continue on (False). [default: False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the final config dict that was used.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.BuildFile">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildFile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/output.html#BuildFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an output file as specified in config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – A configuration dict.</p></li>
<li><p><strong>file_num</strong> – If given, the current file_num. [default: 0]</p></li>
<li><p><strong>image_num</strong> – If given, the current image_num. [default: 0]</p></li>
<li><p><strong>obj_num</strong> – If given, the current obj_num. [default: 0]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(file_name, t), a tuple of the file name and the time taken to build file
Note: t==0 indicates that this file was skipped.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetNFiles">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetNFiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/output.html#GetNFiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetNFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of files that will be made, based on the information in the config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetNImagesForFile">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetNImagesForFile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/output.html#GetNImagesForFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetNImagesForFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of images that will be made for the file number file_num, based on the
information in the config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>file_num</strong> – The current file number.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of images</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetNObjForFile">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetNObjForFile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/output.html#GetNObjForFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetNObjForFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of objects that will be made for each image built as part of the file file_num,
which starts at image number image_num, based on the information in the config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>file_num</strong> – The current file number.</p></li>
<li><p><strong>image_num</strong> – The current image number.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>approx</strong> – Whether an approximate/overestimate is ok [default: False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of the number of objects in each image [ nobj0, nobj1, nobj2, … ]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupConfigFileNum">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupConfigFileNum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/output.html#SetupConfigFileNum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupConfigFileNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the basic setup of the config dict at the file processing level.</p>
<p>Includes:
- Set config[‘file_num’] = file_num
- Set config[‘image_num’] = image_num
- Set config[‘obj_num’] = obj_num
- Set config[‘index_key’] = ‘file_num’
- Set config[‘start_image_num’] = image_num
- Set config[‘start_obj_num’] = obj_num
- Make sure config[‘output’] exists
- Set default config[‘output’][‘type’] to ‘Fits’ if not specified
- Check that the specified output type is valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – A configuration dict.</p></li>
<li><p><strong>file_num</strong> – The current file_num. (If file_num=None, then don’t set file_num or
start_obj_num items in the config dict.)</p></li>
<li><p><strong>image_num</strong> – The current image_num.</p></li>
<li><p><strong>obj_num</strong> – The current obj_num.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="building-images">
<h2>Building Images<a class="headerlink" href="#building-images" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to building one or more images as specified by a config
dict:</p>
<dl class="py function">
<dt id="galsim.config.BuildImages">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildImages</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nimages</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/image.html#BuildImages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a number of postage stamp images as specified by the config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nimages</strong> – How many images to build.</p></li>
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>image_num</strong> – If given, the current image number. [default: 0]</p></li>
<li><p><strong>obj_num</strong> – If given, the first object number in the image. [default: 0]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of images</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.BuildImage">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildImage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/image.html#BuildImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an Image according to the information in config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>image_num</strong> – If given, the current image number. [default: 0]</p></li>
<li><p><strong>obj_num</strong> – If given, the first object number in the image. [default: 0]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the final image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupConfigImageSize">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupConfigImageSize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xsize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ysize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/image.html#SetupConfigImageSize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupConfigImageSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Do some further setup of the config dict at the image processing level based on
the provided image size.</p>
<ul class="simple">
<li><p>Set config[‘image_xsize’], config[‘image_ysize’] to the size of the image</p></li>
<li><p>Set config[‘image_origin’] to the origin of the image</p></li>
<li><p>Set config[‘image_center’] to the center of the image</p></li>
<li><p>Set config[‘image_bounds’] to the bounds of the image</p></li>
<li><p>Build the WCS based on either config[‘image’][‘wcs’] or config[‘image’][‘pixel_scale’]</p></li>
<li><p>Set config[‘wcs’] to be the built wcs</p></li>
<li><p>If wcs.isPixelScale(), also set config[‘pixel_scale’] for convenience.</p></li>
<li><p>Set config[‘world_center’] to either a given value or based on wcs and image_center</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>xsize</strong> – The size of the image in the x-dimension.</p></li>
<li><p><strong>ysize</strong> – The size of the image in the y-dimension.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupConfigImageNum">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupConfigImageNum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/image.html#SetupConfigImageNum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupConfigImageNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the basic setup of the config dict at the image processing level.</p>
<p>Includes:
- Set config[‘image_num’] = image_num
- Set config[‘obj_num’] = obj_num
- Set config[‘index_key’] = ‘image_num’
- Make sure config[‘image’] exists
- Set default config[‘image’][‘type’] to ‘Single’ if not specified
- Check that the specified image type is valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>image_num</strong> – The current image number.</p></li>
<li><p><strong>obj_num</strong> – The first object number in the image.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetNObjForImage">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetNObjForImage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/image.html#GetNObjForImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetNObjForImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of objects that will be made for the image number image_num based on
the information in the config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>image_num</strong> – The current image number.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress.</p></li>
<li><p><strong>approx</strong> – Whether an approximate/overestimate is ok [default: False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.FlattenNoiseVariance">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">FlattenNoiseVariance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_vars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/image.html#FlattenNoiseVariance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.FlattenNoiseVariance" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a helper function to bring the noise level up to a constant value
across the image.  If some of the galaxies are RealGalaxy objects and noise whitening
(or symmetrizing) is turned on, then there will already be some noise in the
stamps that get built.  This function goes through and figures out what the maximum
current variance is anywhere in the full image and adds noise to the other pixels
to bring everything up to that level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>full_image</strong> – The full image onto which the noise should be added.</p></li>
<li><p><strong>stamps</strong> – A list of the individual postage stamps.</p></li>
<li><p><strong>current_vars</strong> – A list of the current variance in each postage stamps.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the final variance in the image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.BuildWCS">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildWCS</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/wcs.html#BuildWCS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildWCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the wcs parameters from config[key] and return a constructed wcs object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – A dict with the configuration information. (usually base[‘image’])</p></li>
<li><p><strong>key</strong> – The key name in config indicating which object to build.</p></li>
<li><p><strong>base</strong> – The base dict of the configuration.</p></li>
<li><p><strong>logger</strong> – Optionally, provide a logger for logging debug statements. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a BaseWCS instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.AddSky">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">AddSky</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/noise.html#AddSky"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.AddSky" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the sky level to the image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The (base) configuration dict</p></li>
<li><p><strong>im</strong> – The image onto which to add the sky</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.AddNoise">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">AddNoise</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/noise.html#AddNoise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.AddNoise" title="Permalink to this definition">¶</a></dt>
<dd><p>Add noise to an image according to the noise specifications in the noise dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The (base) configuration dict</p></li>
<li><p><strong>im</strong> – The image onto which to add the noise</p></li>
<li><p><strong>current_var</strong> – The current noise variance present in the image already [default: 0]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Variance added to the image (units are ADU if gain != 1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.CalculateNoiseVariance">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">CalculateNoiseVariance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/noise.html#CalculateNoiseVariance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.CalculateNoiseVariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the noise variance from the noise specified in the noise dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The (base) configuration dict</p></li>
<li><p><strong>full</strong> – If the noise is variable across the image, return the full image with the
noise variance at every pixel.  Otherwise, just return the value at the center.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the noise variance (units are ADU if gain != 1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.AddNoiseVariance">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">AddNoiseVariance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_obj_var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/noise.html#AddNoiseVariance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.AddNoiseVariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the noise variance to an image according to the noise specifications in the noise dict.
Typically, this is used for building a weight map, which is typically the inverse variance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The (base) configuration dict</p></li>
<li><p><strong>im</strong> – The image onto which to add the variance values</p></li>
<li><p><strong>include_obj_var</strong> – Whether to add the variance from the object photons for noise
models that have a component based on the number of photons.
Note: if this is True, the returned variance will not include this
contribution to the noise variance.  [default: False]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the variance in the image (units are ADU if gain != 1)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetSky">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetSky</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/noise.html#GetSky"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetSky" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the sky information and return either a float value for the sky level per pixel
or an image, as needed.</p>
<p>If an image is required (because wcs is not uniform) then it will use the presence of
base[‘image_pos’] to determine what size image to return (stamp or full).  If there is
a current image_pos, then we are doing a stamp.  Otherwise a full image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration field with the sky specification, which can be either
base[‘image’] or base[‘image’][‘noise’]</p></li>
<li><p><strong>base</strong> – The base configuration dict</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>full</strong> – If the sky level is variable across the image, return the full
image with the sky at every pixel.  Otherwise, just return the
sky at the image center.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sky, either a float value or an Image.  (The latter only if full=True)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="building-stamps">
<h2>Building Stamps<a class="headerlink" href="#building-stamps" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to building one or more stamps as specified by a config
dict:</p>
<dl class="py function">
<dt id="galsim.config.BuildStamps">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildStamps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nobjects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ysize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/stamp.html#BuildStamps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildStamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a number of postage stamp images as specified by the config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nobjects</strong> – How many postage stamps to build.</p></li>
<li><p><strong>config</strong> – A configuration dict.</p></li>
<li><p><strong>obj_num</strong> – If given, the current obj_num. [default: 0]</p></li>
<li><p><strong>xsize</strong> – The size of a single stamp in the x direction. [default: 0,
which means to look first for config.stamp.xsize, then for
config.image.stamp_xsize, and if neither are given, then use
automatic sizing.]</p></li>
<li><p><strong>ysize</strong> – The size of a single stamp in the y direction. [default: 0,
which means to look first for config.stamp.ysize, then for
config.image.stamp_ysize, and if neither are given, then use
automatic sizing.]</p></li>
<li><p><strong>do_noise</strong> – Whether to add noise to the image (according to config[‘noise’]).
[default: True]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the tuple (images, current_vars).  Both are themselves tuples.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.BuildStamp">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildStamp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ysize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/stamp.html#BuildStamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildStamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a single stamp image using the given config file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – A configuration dict.</p></li>
<li><p><strong>obj_num</strong> – If given, the current obj_num [default: 0]</p></li>
<li><p><strong>xsize</strong> – The xsize of the stamp to build (if known). [default: 0]</p></li>
<li><p><strong>ysize</strong> – The ysize of the stamp to build (if known). [default: 0]</p></li>
<li><p><strong>do_noise</strong> – Whether to add noise to the image (according to config[‘noise’]).
[default: True]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the tuple (image, current_var)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupConfigStampSize">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupConfigStampSize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xsize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ysize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">world_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/stamp.html#SetupConfigStampSize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupConfigStampSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Do further setup of the config dict at the stamp (or object) processing level reflecting
the stamp size and position in either image or world coordinates.</p>
<p>Note: This is now a StampBuilder method.  So this function just calls StampBuilder.locateStamp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – A configuration dict.</p></li>
<li><p><strong>xsize</strong> – The size of the stamp in the x-dimension. [may be 0 if unknown]</p></li>
<li><p><strong>ysize</strong> – The size of the stamp in the y-dimension. [may be 0 if unknown]</p></li>
<li><p><strong>image_pos</strong> – The position of the stamp in image coordinates. [may be None]</p></li>
<li><p><strong>world_pos</strong> – The position of the stamp in world coordinates. [may be None]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupConfigObjNum">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupConfigObjNum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/stamp.html#SetupConfigObjNum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupConfigObjNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the basic setup of the config dict at the stamp (or object) processing level.</p>
<p>Includes:</p>
<ul class="simple">
<li><p>Set config[‘obj_num’] = obj_num</p></li>
<li><p>Set config[‘index_key’] = ‘obj_num’</p></li>
<li><p>Make sure config[‘stamp’] exists</p></li>
<li><p>Set default config[‘stamp’][‘type’] to ‘Basic’</p></li>
<li><p>Copy over values from config[‘image’] that are allowed there, but really belong
in config[‘stamp’].</p></li>
<li><p>Set config[‘stamp’][‘draw_method’] to ‘auto’ if not given.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – A configuration dict.</p></li>
<li><p><strong>obj_num</strong> – The current obj_num.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.DrawBasic">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">DrawBasic</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prof</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/stamp.html#DrawBasic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.DrawBasic" title="Permalink to this definition">¶</a></dt>
<dd><p>The basic implementation of the draw command</p>
<p>This function is provided as a free function, rather than just the base class implementation
in StampBuilder to make it easier for classes derived from StampBuilder to use to help
implement their draw functions.  The base class, StampBuilder, just calls this function
for its draw method.</p>
<p>This version also allows for additional kwargs, which are passed on to the drawImage function.
e.g. you can add add_to_image=True or setup_only=True if these are helpful.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prof</strong> – The profile to draw.</p></li>
<li><p><strong>image</strong> – The image onto which to draw the profile (which may be None).</p></li>
<li><p><strong>method</strong> – The method to use in drawImage.</p></li>
<li><p><strong>offset</strong> – The offset to apply when drawing.</p></li>
<li><p><strong>config</strong> – The configuration dict for the stamp field.</p></li>
<li><p><strong>base</strong> – The base configuration dict.</p></li>
<li><p><strong>logger</strong> – A logger object to log progress.</p></li>
<li><p><strong>**kwargs</strong> – Any additional kwargs are passed along to the drawImage function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the resulting image</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="building-objects">
<h2>Building Objects<a class="headerlink" href="#building-objects" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to building individual objects as specified by a config
dict:</p>
<dl class="py function">
<dt id="galsim.config.BuildGSObject">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">BuildGSObject</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gsparams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/gsobject.html#BuildGSObject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.BuildGSObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a GSObject from the parameters in config[key].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – A dict with the configuration information.</p></li>
<li><p><strong>key</strong> – The key name in config indicating which object to build.</p></li>
<li><p><strong>base</strong> – The base dict of the configuration. [default: config]</p></li>
<li><p><strong>gsparams</strong> – Optionally, provide non-default GSParams items.  Any <code class="docutils literal notranslate"><span class="pre">gsparams</span></code> specified
at this level will be added to the list.  This should be a dict with
whatever kwargs should be used in constructing the GSParams object.
[default: {}]</p></li>
<li><p><strong>logger</strong> – Optionally, provide a logger for logging debug statements.
[default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the tuple (gsobject, safe), where <code class="docutils literal notranslate"><span class="pre">gsobject</span></code> is the built object, and <code class="docutils literal notranslate"><span class="pre">safe</span></code> is
a bool that says whether it is safe to use this object again next time.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.UpdateGSParams">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">UpdateGSParams</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gsparams</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/gsobject.html#UpdateGSParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.UpdateGSParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Add additional items to the <code class="docutils literal notranslate"><span class="pre">gsparams</span></code> dict based on config[‘gsparams’].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gsparams</strong> – A dict with whatever kwargs should be used in constructing the GSParams object.</p></li>
<li><p><strong>config</strong> – A dict with the configuration information.</p></li>
<li><p><strong>base</strong> – The base dict of the configuration.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an updated gsparams dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.TransformObject">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">TransformObject</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gsobject</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/gsobject.html#TransformObject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.TransformObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies ellipticity, rotation, gravitational shearing and centroid shifting to a
supplied GSObject, in that order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gsobject</strong> – The GSObject to be transformed.</p></li>
<li><p><strong>config</strong> – A dict with the tranformation information for this object.</p></li>
<li><p><strong>base</strong> – The base dict of the configuration.</p></li>
<li><p><strong>logger</strong> – A logger for logging debug statements.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>transformed GSObject.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="galsim.config.SkipThisObject">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SkipThisObject</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/gsobject.html#SkipThisObject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SkipThisObject" title="Permalink to this definition">¶</a></dt>
<dd><p>A class that a builder can throw to indicate that nothing went wrong, but for some
reason, this particular object should be skipped and just move onto the next object.
The constructor takes an optional message that will be output to the logger if
logging is active.</p>
</dd></dl>

</div>
<div class="section" id="generating-values">
<h2>Generating Values<a class="headerlink" href="#generating-values" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to generating and accessing individual values as specified by
a config dict:</p>
<dl class="py function">
<dt id="galsim.config.ParseValue">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ParseValue</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/value.html#ParseValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ParseValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Read or generate a parameter value from config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The config dict from which to parse the value.</p></li>
<li><p><strong>key</strong> – The key value in the dict to parse.</p></li>
<li><p><strong>base</strong> – The base config dict.  [default: None, which means use base=config]</p></li>
<li><p><strong>value_type</strong> – The value_type expected.  [default: None, which means it won’t check
that the value is the right type.]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the tuple (value, safe).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetCurrentValue">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetCurrentValue</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/value.html#GetCurrentValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetCurrentValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current value of another config item given the key name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – The (extended) key value in the dict to get the current value of.</p></li>
<li><p><strong>config</strong> – The config dict from which to get the key.</p></li>
<li><p><strong>value_type</strong> – The value_type expected.  [default: None, which means it won’t check
that the value is the right type.]</p></li>
<li><p><strong>base</strong> – The base config dict.  [default: None, which means use base=config]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the current value</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.EvaluateCurrentValue">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">EvaluateCurrentValue</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/value.html#EvaluateCurrentValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.EvaluateCurrentValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to evaluate the current value at config[key] where key is no longer
an extended key, and config is the local dict where it is relevant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – The key value in the dict to get the current value of.</p></li>
<li><p><strong>config</strong> – The config dict from which to get the key.</p></li>
<li><p><strong>base</strong> – The base config dict.</p></li>
<li><p><strong>value_type</strong> – The value_type expected.  [default: None, which means it won’t check
that the value is the right type.]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetDefaultIndex">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetDefaultIndex</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/value.html#SetDefaultIndex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetDefaultIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>When the number of items in a list is known, we allow the user to omit some of
the parameters of a Sequence or Random and set them automatically based on the
size of the list, catalog, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The config dict with the field to be updated.</p></li>
<li><p><strong>num</strong> – The number to use for the length of the index Sequence if appropriate.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.CheckAllParams">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">CheckAllParams</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/value.html#CheckAllParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.CheckAllParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the parameters for a particular item are all valid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The config dict to check</p></li>
<li><p><strong>req</strong> – The required items [default: {}]</p></li>
<li><p><strong>opt</strong> – The optional items [default: {}]</p></li>
<li><p><strong>single</strong> – List of items where exactly one is required [default: []]</p></li>
<li><p><strong>ignore</strong> – Items to ignore [default: []]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict, get, with get[key] = value_type for all keys to get.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetAllParams">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetAllParams</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/value.html#GetAllParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetAllParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Check and get all the parameters for a particular item</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The config dict from which to get items.</p></li>
<li><p><strong>req</strong> – The required items [default: {}]</p></li>
<li><p><strong>opt</strong> – The optional items [default: {}]</p></li>
<li><p><strong>single</strong> – List of items where exactly one is required [default: []]</p></li>
<li><p><strong>ignore</strong> – Items to ignore [default: []]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the tuple (kwargs, safe).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ParseWorldPos">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ParseWorldPos</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/stamp.html#ParseWorldPos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ParseWorldPos" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function to parse the ‘world_pos’ value.</p>
<p>The world_pos can be specified either as a regular RA, Dec (which in GalSim is known as a
CelestialCoord) or as Euclidean coordinates in the local tangent plane relative to the
image center (a PositionD).</p>
<ol class="arabic">
<li><p>For the RA/Dec option, the world_pos field should use the type RADec, which includes two
values named ra and dec, each of which should be an Angle type.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">world_pos</span><span class="p">:</span>
    <span class="nb">type</span> <span class="p">:</span> <span class="n">RADec</span>
    <span class="n">ra</span> <span class="p">:</span> <span class="mi">37</span> <span class="n">hours</span>
    <span class="n">dec</span><span class="p">:</span> <span class="o">-</span><span class="mi">23</span> <span class="n">degrees</span>
</pre></div>
</div>
<p>Technically, any other type that results in a CelestialCoord is valid, but RADec is the
only one that is defined natively in GalSim.</p>
</li>
<li><p>For the relative position in the local tangent plane (where 0,0 is the position of the
image center), you can use any PositionD type.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">world_pos</span><span class="p">:</span>
    <span class="nb">type</span> <span class="p">:</span> <span class="n">RandomCircle</span>
    <span class="n">radius</span> <span class="p">:</span> <span class="mi">12</span>       <span class="c1"># arcsec</span>
    <span class="n">inner_radius</span> <span class="p">:</span> <span class="mi">3</span>  <span class="c1"># arcsec</span>
</pre></div>
</div>
</li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict for the stamp field.</p></li>
<li><p><strong>param_name</strong> – The name of the field in the config dict to parse as a world_pos.
Normally, this is just ‘world_pos’.</p></li>
<li><p><strong>base</strong> – The base configuration dict.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>either a CelestialCoord or a PositionD instance.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="using-input-fields">
<h2>Using Input Fields<a class="headerlink" href="#using-input-fields" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to processing and using input fields in a config dict:</p>
<dl class="py function">
<dt id="galsim.config.ProcessInput">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ProcessInput</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_scope_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/input.html#ProcessInput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ProcessInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the input field, reading in any specified input files or setting up
any objects that need to be initialized.</p>
<p>Each item registered as a valid input type will be built and available at the top level
of config in config[‘_input_objs’].  Since there is allowed to be more than one of each type
of input object (e.g. multilpe catalogs or multiple dicts), these are actually lists.
If there is only one e.g. catalog entry in config[‘input’], then this list will have one
element.</p>
<p>e.g. config[‘_input_objs’][‘catalog’][0] holds the first catalog item defined in
config[‘input’][‘catalog’] (if any).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict to process</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>file_scope_only</strong> – If True, only process the input items that are marked as being
possibly relevant for file- and image-level items. [default: False]</p></li>
<li><p><strong>safe_only</strong> – If True, only process the input items whose construction parameters
are not going to change every file, so it can be made once and
used by multiple processes if appropriate. [default: False]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ProcessInputNObjects">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ProcessInputNObjects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/input.html#ProcessInputNObjects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ProcessInputNObjects" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the input field, just enough to determine the number of objects.</p>
<p>Some input items are relevant for determining the number of objects in a file or image.
This means we need to have them processed before splitting up jobs over multiple processes
(since the seed increments based on the number of objects).  So this function builds
the input items that have a getNObjects() method and returns the number of objects.</p>
<dl class="simple">
<dt>Caveat: This function tries each input type in galsim.config.valid_input_types in</dt><dd><p>order and returns the nobjects for the first one that works.  If multiple input
items have nobjects and they are inconsistent, this function may return a
number of objects that isn’t what you wanted.  In this case, you should explicitly
set nobjects or nimages in the configuration dict, rather than relying on this
galsim.config “magic”.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict to process</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>approx</strong> – Whether an approximate count is ok. [default: False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of objects to use.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupInput">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupInput</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/input.html#SetupInput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the input field if it hasn’t been processed yet.</p>
<p>This is mostly useful if the user isn’t running through the full processing and just starting
at BuildImage say.  This will make sure the input objects are set up in the way that they
normally would have been by the first level of processing in a <code class="docutils literal notranslate"><span class="pre">galsim</span> <span class="pre">config_file</span></code> run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict in which to setup the input items.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupInputsForImage">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupInputsForImage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/input.html#SetupInputsForImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupInputsForImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Do any necessary setup of the input items at the start of an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict to process</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetInputObj">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetInputObj</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/input.html#GetInputObj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetInputObj" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the input object needed for generating a particular value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_type</strong> – The type of input object to get</p></li>
<li><p><strong>config</strong> – The config dict for this input item</p></li>
<li><p><strong>base</strong> – The base config dict</p></li>
<li><p><strong>param_name</strong> – The type of value that we are trying to construct (only used for
error messages).</p></li>
<li><p><strong>num</strong> – Which number in the list of this key, if needed. [default: 0]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="processing-extra-outputs">
<h2>Processing Extra Outputs<a class="headerlink" href="#processing-extra-outputs" title="Permalink to this headline">¶</a></h2>
<p>The following functions are relevant to processing extra output fields in a config dict:</p>
<dl class="py function">
<dt id="galsim.config.SetupExtraOutput">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupExtraOutput</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#SetupExtraOutput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupExtraOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the extra output items as necessary, including building Managers for the work
space so they can work safely in multi-processing mode.  Each builder will be placed in
config[‘extra_builder’][key] where key is the key in galsim.config.valid_extra_outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupExtraOutputsForImage">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupExtraOutputsForImage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#SetupExtraOutputsForImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupExtraOutputsForImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any necessary setup for the extra output items at the start of a new image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ProcessExtraOutputsForStamp">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ProcessExtraOutputsForStamp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#ProcessExtraOutputsForStamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ProcessExtraOutputsForStamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the appropriate processing code for any extra output items that need to do something
at the end of building each object.</p>
<p>This gets called after all the object flux is added to the stamp, but before the sky level
and noise are added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>skip</strong> – Was the drawing of this object skipped?</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ProcessExtraOutputsForImage">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ProcessExtraOutputsForImage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#ProcessExtraOutputsForImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ProcessExtraOutputsForImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the appropriate processing code for any extra output items that need to do something
at the end of building each image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.WriteExtraOutputs">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">WriteExtraOutputs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">main_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#WriteExtraOutputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.WriteExtraOutputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the extra output objects to files.</p>
<p>This gets run at the end of the functions for building the regular output files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>main_data</strong> – The main file data in case it is needed.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.AddExtraOutputHDUs">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">AddExtraOutputHDUs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">main_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#AddExtraOutputHDUs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.AddExtraOutputHDUs" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the extra output objects to either HDUS or images as appropriate and add them
to the existing data.</p>
<p>This gets run at the end of the functions for building the regular output files.</p>
<p>Note: the extra items must have hdu numbers ranging continuously (in any order) starting
at len(data).  Typically first = 1, since the main image is the primary HDU, numbered 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>main_data</strong> – The main file data as a list of images.  Usually just [image] where
image is the primary image to be written to the output file.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>data with additional hdus added</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.CheckNoExtraOutputHDUs">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">CheckNoExtraOutputHDUs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#CheckNoExtraOutputHDUs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.CheckNoExtraOutputHDUs" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that none of the extra output objects want to add to the HDU list.</p>
<p>Raises an exception if one of them has an hdu field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>output_type</strong> – A string to use in the error message to indicate which output type
had a problem.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetFinalExtraOutput">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetFinalExtraOutput</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">main_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/extra.html#GetFinalExtraOutput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetFinalExtraOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the finalized output object for the given extra output key</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – The name of the output field in config[‘output’]</p></li>
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>main_data</strong> – The main file data in case it is needed.  [default: []]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the final data to be output.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="config-utilities">
<h2>Config Utilities<a class="headerlink" href="#config-utilities" title="Permalink to this headline">¶</a></h2>
<p>The following functions are used internally by the various <code class="docutils literal notranslate"><span class="pre">galsim.config</span></code> functions,
but they might be useful for some users.</p>
<dl class="py class">
<dt id="galsim.config.LoggerWrapper">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">LoggerWrapper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#LoggerWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.LoggerWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrap around a Logger object that checks whether a debug or info or warn call will
actually produce any output before calling the functions.</p>
<p>This seems like a gratuitous wrapper, and it is if the object being wrapped is a real
Logger object.  However, we use it to wrap proxy objects (returned from GetLoggerProxy)
that would otherwise send the arguments of logger.debug(…) calls through a multiprocessing
pipe before (typically) being ignored.  Here, we check whether the call will actually
produce any output before calling the functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>logger</strong> – The logger object to wrap.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ReadYaml">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ReadYaml</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#ReadYaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ReadYaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a YAML configuration file and return the corresponding dicts.</p>
<p>A YAML file is allowed to define several dicts using multiple documents. The GalSim parser
treats this as a set of multiple jobs to be done.  The first document is taken to be a “base”
dict that has common definitions for all the jobs.  Then each subsequent document has the
(usually small) modifications to the base dict for each job.  See demo6.yaml, demo8.yaml and
demo9.yaml in the GalSim/examples directory for example usage.</p>
<p>The return value will be a list of dicts, one dict for each job to be done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file</strong> – The name of the configuration file to read.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of config dicts</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ReadJson">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ReadJson</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#ReadJson"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ReadJson" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a JSON configuration file and return the corresponding dicts.</p>
<p>A JSON file only defines a single dict.  However to be parallel to the functionality of
ReadYaml, the output is a list with a single item, which is the dict defined by the JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file</strong> – The name of the configuration file to read.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>[config_dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.MergeConfig">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">MergeConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#MergeConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.MergeConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge config2 into config1 such that it has all the information from either config1 or
config2 including places where both input dicts have some of a field defined.</p>
<p>e.g. If config1 has image.pixel_scale, and config2 has image.noise, then the returned dict
will have both.</p>
<p>For real conflicts (the same value in both cases), config1’s value takes precedence</p>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ConvertNones">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ConvertNones</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#ConvertNones"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ConvertNones" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert any items whose value is ‘None’ to None.</p>
<p>To allow some parameters to be set to None in the config dict (e.g. in a list, where only
some values need to be None), we convert all values == ‘None’ to None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The config dict to process</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.RemoveCurrent">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">RemoveCurrent</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_safe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#RemoveCurrent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.RemoveCurrent" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any “current” values stored in the config dict at any level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>keep_safe</strong> – Should current values that are marked as safe be preserved?
[default: False]</p></li>
<li><p><strong>type</strong> – If provided, only clear the current value of objects that use this
particular type.  [default: None, which means to remove current values
of all types.]</p></li>
<li><p><strong>index_key</strong> – If provided, only clear the current value of objects that use this
index_key (or start with this index_key, so obj_num also does
obj_num_in_file).  [default: None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetLoggerProxy">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetLoggerProxy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#GetLoggerProxy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetLoggerProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a proxy for the given logger that can be passed into multiprocessing Processes
and used safely.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>logger</strong> – The logger to make a copy of</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a proxy for the given logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.UpdateNProc">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">UpdateNProc</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nproc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#UpdateNProc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.UpdateNProc" title="Permalink to this definition">¶</a></dt>
<dd><p>Update nproc</p>
<ul class="simple">
<li><p>If nproc &lt; 0, set nproc to ncpu</p></li>
<li><p>Make sure nproc &lt;= ntot</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nproc</strong> – The nominal number of processes from the config dict</p></li>
<li><p><strong>ntot</strong> – The total number of files/images/stamps to do, so the maximum number of
processes that would make sense.</p></li>
<li><p><strong>config</strong> – The configuration dict to copy.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of processes to use.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ParseRandomSeed">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ParseRandomSeed</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_offset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#ParseRandomSeed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ParseRandomSeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the random_seed field, converting an integer (initial) seed value into a
Sequence.</p>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.PropagateIndexKeyRNGNum">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">PropagateIndexKeyRNGNum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng_index_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#PropagateIndexKeyRNGNum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.PropagateIndexKeyRNGNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagate any index_key or rng_num specification in a dict to all sub-fields</p>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetupConfigRNG">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetupConfigRNG</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#SetupConfigRNG"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetupConfigRNG" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the RNG in the config dict.</p>
<ul class="simple">
<li><p>Setup config[‘image’][‘random_seed’] if necessary</p></li>
<li><p>Set config[‘rng’] and other related values based on appropriate random_seed</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>seed_offset</strong> – An offset to use relative to what config[‘image’][‘random_seed’] gives.
[default: 0]</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the seed used to initialize the RNG.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.ParseExtendedKey">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">ParseExtendedKey</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#ParseExtendedKey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.ParseExtendedKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Traverse all but the last item in an extended key and return the resulting config, key.</p>
<p>If key is an extended key like gal.items.0.ellip.e, then this will return the tuple.
(config[‘gal’][‘items’][0][‘ellip’], ‘e’).</p>
<p>If key is a regular string, then is just returns the original (config, key).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>key</strong> – The possibly extended key.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the equivalent (config, key) where key is now a regular non-extended key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetFromConfig">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetFromConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#GetFromConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetFromConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value for the (possibly extended) key from a config dict.</p>
<p>If key is a simple string, then this is equivalent to config[key].
However, key is allowed to be a chain of keys such as ‘gal.items.0.ellip.e’, in which
case this function will return config[‘gal’][‘items’][0][‘ellip’][‘e’].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>key</strong> – The possibly extended key.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the value of that key from the config.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetInConfig">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetInConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#SetInConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetInConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of a (possibly extended) key in a config dict.</p>
<p>If key is a simple string, then this is equivalent to config[key] = value.
However, key is allowed to be a chain of keys such as ‘gal.items.0.ellip.e’, in which
case this function will set config[‘gal’][‘items’][0][‘ellip’][‘e’] = value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>key</strong> – The possibly extended key.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the value of that key from the config.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.UpdateConfig">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">UpdateConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#UpdateConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.UpdateConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the given config dict with additional parameters/values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict to update.</p></li>
<li><p><strong>new_params</strong> – A dict of parameters to update.  The keys of this dict may be
chained field names, such as gal.first.dilate, which will be
parsed to update config[‘gal’][‘first’][‘dilate’].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.MultiProcess">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">MultiProcess</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nproc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">900</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">except_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">except_abort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#MultiProcess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.MultiProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function for performing a task using multiprocessing.</p>
<p>A note about the nomenclature here.  We use the term “job” to mean the job of building a single
file or image or stamp.  The output of each job is gathered into the list of results that
is returned.  A task is a collection of one or more jobs that are all done by the same
processor.  For simple cases, each task is just a single job, but for things like a Ring
test, the task needs to have the jobs for a full ring.</p>
<p>The tasks argument is a list of tasks.
Each task in that list is a list of jobs.
Each job is a tuple consisting of (kwargs, k), where kwargs is the dict of kwargs to pass to
the job_func and k is the index of this job in the full list of jobs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nproc</strong> – How many processes to use.</p></li>
<li><p><strong>config</strong> – The configuration dict.</p></li>
<li><p><strong>job_func</strong> – <p>The function to run for each job.  It will be called as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">job_func</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>where kwargs is from one of the jobs in the task list.</p>
</p></li>
<li><p><strong>tasks</strong> – A list of tasks to run.  Each task is a list of jobs, each of which is
a tuple (kwargs, k).</p></li>
<li><p><strong>item</strong> – A string indicating what is being worked on.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>timeout</strong> – How many seconds to allow for each task before timing out. [default: 900]</p></li>
<li><p><strong>done_func</strong> – <p>A function to run upon completion of each job.  It will be called as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">done_func</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">proc</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<p>where proc is the process name, k is the index of the job, result is
the return value of that job, and t is the time taken. [default: None]</p>
</p></li>
<li><p><strong>except_func</strong> – <p>A function to run if an exception is encountered.  It will be called as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">except_func</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">proc</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">tr</span><span class="p">)</span>
</pre></div>
</div>
<p>where proc is the process name, k is the index of the job that failed,
ex is the exception caught, and tr is the traceback. [default: None]</p>
</p></li>
<li><p><strong>except_abort</strong> – Whether an exception should abort the rest of the processing.
If False, then the returned results list will not include anything
for the jobs that failed.  [default: True]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of the outputs from job_func for each job</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetIndex">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetIndex</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_sequence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#GetIndex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the index to use for the current object or parameter and the index_key.</p>
<p>First check for an explicit index_key value given by the user.
Then if base[index_key] is other than obj_num, use that.
Finally, if this is a sequence, default to ‘obj_num_in_file’, otherwise ‘obj_num’.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>index, index_key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.GetRNG">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">GetRNG</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#GetRNG"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.GetRNG" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the appropriate current rng according to whatever the current index_key is.</p>
<p>If a logger is provided, then it will emit a warning if there is no current rng setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict for the current item being worked on.</p></li>
<li><p><strong>base</strong> – The base configuration dict.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress. [default: None]</p></li>
<li><p><strong>tag</strong> – If given, an appropriate name for the current item to use in the
warning message. [default: ‘’]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>either the appropriate rng for the current index_key or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.CleanConfig">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">CleanConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#CleanConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.CleanConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “clean” config dict without any leading-underscore values</p>
<p>GalSim config dicts store a lot of ancillary information internally to help improve
efficiency.  However, some of these are actually pointers to other places in the dict, so
printing a config dict, or even what should be a small portion of one, can have infinite loops.</p>
<p>This helper function is useful when debugging config processing to strip out all of these
leading-underscore values, so that printing the dict is reasonable.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">CleanConfig</span><span class="p">(</span><span class="n">config_dict</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.SetDefaultExt">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">SetDefaultExt</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_ext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#SetDefaultExt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.SetDefaultExt" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a default ext in a config ‘file_name’ field if appropriate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict for the item that might need to be given
a default ‘ext’ value.</p></li>
<li><p><strong>default_ext</strong> – The default extension to set in the config dict if one is not set.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.RetryIO">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">RetryIO</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/util.html#RetryIO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.RetryIO" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function to retry I/O commands</p>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.MakeImageTasks">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">MakeImageTasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/image.html#MakeImageTasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.MakeImageTasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of jobs into a list of tasks.</p>
<p>See the doc string for galsim.config.MultiProcess for the meaning of this distinction.</p>
<p>For most image types, there is just one job per task, so the tasks list is just:</p>
<blockquote>
<div><p>tasks = [ [ (job, k) ] for k, job in enumerate(jobs) ]</p>
</div></blockquote>
<p>But some image types may need groups of jobs to be done sequentially by the same process.
The image type=Single for instance uses whatever grouping is needed for the stamp type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict</p></li>
<li><p><strong>jobs</strong> – A list of jobs to split up into tasks.  Each job in the list is a
dict of parameters that includes ‘image_num’ and ‘obj_num’.</p></li>
<li><p><strong>logger</strong> – If given, a logger object to log progress.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.MakeStampTasks">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">MakeStampTasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/stamp.html#MakeStampTasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.MakeStampTasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of jobs into a list of tasks.</p>
<p>See the doc string for galsim.config.MultiProcess for the meaning of this distinction.</p>
<p>For the Basic stamp type, there is just one job per task, so the tasks list is just:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="p">(</span><span class="n">job</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">job</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">jobs</span><span class="p">)</span> <span class="p">]</span>
</pre></div>
</div>
<p>But other stamp types may need groups of jobs to be done sequentially by the same process.
cf. stamp type=Ring.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict</p></li>
<li><p><strong>jobs</strong> – A list of jobs to split up into tasks.  Each job in the list is a
dict of parameters that includes ‘obj_num’.</p></li>
<li><p><strong>logger</strong> – A logger object to log progress.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="galsim.config.RegisterInputConnectedType">
<code class="sig-prename descclassname"><span class="pre">galsim.config.</span></code><code class="sig-name descname"><span class="pre">RegisterInputConnectedType</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/config/input.html#RegisterInputConnectedType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#galsim.config.RegisterInputConnectedType" title="Permalink to this definition">¶</a></dt>
<dd><p>Register that some gsobject or value type is connected to a given input type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_type</strong> – The name of the type in config[‘input’]</p></li>
<li><p><strong>type_name</strong> – The name of the type that uses this input object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="config_galsim.html" class="btn btn-neutral float-left" title="The galsim Executable" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hsm.html" class="btn btn-neutral float-right" title="The HSM Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, GalSim-developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>