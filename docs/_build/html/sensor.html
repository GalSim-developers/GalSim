

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sensor Models &mdash; GalSim 2.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Surface Operators" href="surface.html" />
    <link rel="prev" title="Photon Arrays" href="photon_array.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GalSim
          

          
          </a>

          
            
            
              <div class="version">
                2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Images and Related Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="sb.html">Surface Brightness Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromatic.html">Wavelength-dependent Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="wcs.html">World Coordinate Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="random.html">Noise and Random Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="wl.html">Weak Lensing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="photon.html">Photon Shooting</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="photon_array.html">Photon Arrays</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sensor Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="surface.html">Surface Operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Helper Functions and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">Errors and Warnings</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">The Config Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="hsm.html">The HSM Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="des.html">The DES Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="wfirst.html">The WFIRST Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared.html">Shared Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Revision History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GalSim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="photon.html">Photon Shooting</a> &raquo;</li>
        
      <li>Sensor Models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sensor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sensor-models">
<h1>Sensor Models<a class="headerlink" href="#sensor-models" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#galsim.Sensor" title="galsim.Sensor"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> classes implement the process of turning a set of photons incident at the surface
of the detector in the focal plane into an image with counts of electrons in each pixel.</p>
<p>The <a class="reference internal" href="#galsim.Sensor" title="galsim.Sensor"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> class itself implements the simplest possible sensor model, which just converts each
photon into an electron in whatever pixel is below the location where the photon hits.
However, it also serves as a base class for other classes that implement more sophisticated
treatments of the photon to electron conversion and the drift from the conversion layer to the
bottom of the detector.</p>
<dl class="class">
<dt id="galsim.Sensor">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">Sensor</code><a class="reference internal" href="_modules/galsim/sensor.html#Sensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Sensor" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for other sensor models, and also an implementation of the simplest possible
sensor model that just converts each photon into an electron and drops it in the appropriate
pixel.</p>
<dl class="method">
<dt id="galsim.Sensor.accumulate">
<code class="sig-name descname">accumulate</code><span class="sig-paren">(</span><em class="sig-param">photons</em>, <em class="sig-param">image</em>, <em class="sig-param">orig_center=None</em>, <em class="sig-param">resume=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sensor.html#Sensor.accumulate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Sensor.accumulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Accumulate the photons incident at the surface of the sensor into the appropriate
pixels in the image.</p>
<p>Each photon has a position, which corresponds to the (x,y) position at the top of the
sensor.  In general, they may also have incidence directions and wavelengths, although
these are not used by the base class implementation.</p>
<p>The base class implementation simply accumulates the photons above each pixel into that
pixel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photons</strong> – A <a class="reference internal" href="photon_array.html#galsim.PhotonArray" title="galsim.PhotonArray"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PhotonArray</span></code></a> instance describing the incident photons.</p></li>
<li><p><strong>image</strong> – The <a class="reference internal" href="image_class.html#galsim.Image" title="galsim.Image"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Image</span></code></a> into which the photons should be accumuated.</p></li>
<li><p><strong>orig_center</strong> – The <a class="reference internal" href="pos.html#galsim.Position" title="galsim.Position"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Position</span></code></a> of the image center in the original image coordinates.
[default: (0,0)]</p></li>
<li><p><strong>resume</strong> – Resume accumulating on the same image as a previous call to accumulate.
In the base class, this has no effect, but it can provide an efficiency
gain for some derived classes. [default: False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the total flux that fell onto the image.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="galsim.SiliconSensor">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">SiliconSensor</code><span class="sig-paren">(</span><em class="sig-param">name='lsst_itl_8'</em>, <em class="sig-param">strength=1.0</em>, <em class="sig-param">rng=None</em>, <em class="sig-param">diffusion_factor=1.0</em>, <em class="sig-param">qdist=3</em>, <em class="sig-param">nrecalc=10000</em>, <em class="sig-param">treering_func=None</em>, <em class="sig-param">treering_center=galsim.PositionD(x=0.0</em>, <em class="sig-param">y=0.0)</em>, <em class="sig-param">transpose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sensor.html#SiliconSensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.SiliconSensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">galsim.sensor.Sensor</span></code></p>
<p>A model of a silicon-based CCD sensor that converts photons to electrons at a wavelength-
dependent depth (probabilistically) and drifts them down to the wells, properly taking
into account the repulsion of previously accumulated electrons (known as the brighter-fatter
effect).</p>
<p>There are currently three sensors shipped with GalSim, which you can specify as the <code class="docutils literal notranslate"><span class="pre">name</span></code>
parameter mentioned below.</p>
<blockquote>
<div><dl class="simple">
<dt>lsst_itl_8</dt><dd><p>The ITL sensor being used for LSST, using 8 points along each side of the
pixel boundaries.</p>
</dd>
<dt>lsst_itl_32</dt><dd><p>The ITL sensor being used for LSST, using 32 points along each side of the
pixel boundaries.  (This is more accurate than the lsst_itl_8, but slower.)</p>
</dd>
<dt>lsst_etv_32</dt><dd><p>The ETV sensor being used for LSST, using 32 points along each side of the
pixel boundaries.  (This file is still somewhat preliminary and may be
updated in the future.)</p>
</dd>
</dl>
</div></blockquote>
<p>The SiliconSensor model is asymmetric in the behavior along rows and columns in the CCD.
The traditional meaning of (x,y) is (col,row), and the brighter-fatter effect is stronger
along the columns than across the rows, since charge flows more easily in the readout
direction.</p>
<p>There is also an option to include “tree rings” in the SiliconSensor model, which add small
distortions to the sensor pixel positions due to non-uniform background doping in the silicon
sensor.  The tree rings are defined by a center and a radial amplitude function.  The radial
function needs to be a <a class="reference internal" href="table.html#galsim.LookupTable" title="galsim.LookupTable"><code class="xref any py py-class docutils literal notranslate"><span class="pre">galsim.LookupTable</span></code></a> instance.  Note that if you just want a simple
cosine radial function, you can use the helper class method <a class="reference internal" href="#galsim.SiliconSensor.simple_treerings" title="galsim.SiliconSensor.simple_treerings"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">simple_treerings</span></code></a> to build the
<a class="reference internal" href="table.html#galsim.LookupTable" title="galsim.LookupTable"><code class="xref any py py-class docutils literal notranslate"><span class="pre">LookupTable</span></code></a> for you.</p>
<p>Note that there is an option to transpose the effect if your definition of the image is to
have the readout “columns” along the x direction.  E.g. to conform with the LSST Camera
Coordinate System definitions of x,y, which are transposed relative to the usual FITS meanings.
This only affects the direction of the brighter-fatter effect.  It does not change the meaning
of treering_center, which should still be defined in terms of the coordinate system of the
images being passed to <a class="reference internal" href="#galsim.SiliconSensor.accumulate" title="galsim.SiliconSensor.accumulate"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">accumulate</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The base name of the files which contains the sensor information,
presumably calculated from the Poisson_CCD simulator, which may
be specified either as an absolute path or as one of the above names
that are in the <code class="docutils literal notranslate"><span class="pre">galsim.meta_data.share_dir/sensors</span></code> directory.
name.cfg should be the file used to simulate the pixel distortions,
and name.dat should containt the distorted pixel information.
[default: ‘lsst_itl_8’]</p></li>
<li><p><strong>strength</strong> – Set the strength of the brighter-fatter effect relative to the
amount specified by the Poisson simulation results.  [default: 1]</p></li>
<li><p><strong>rng</strong> – A <a class="reference internal" href="deviate.html#galsim.BaseDeviate" title="galsim.BaseDeviate"><code class="xref any py py-class docutils literal notranslate"><span class="pre">BaseDeviate</span></code></a> object to use for the random number generation
for the stochastic aspects of the electron production and drift.
[default: None, in which case one will be made for you]</p></li>
<li><p><strong>diffusion_factor</strong> – A factor by which to multiply the diffusion.  Use 0.0 to turn off the
effect of diffusion entirely. [default: 1.0]</p></li>
<li><p><strong>qdist</strong> – The maximum number of pixels away to calculate the distortion due to
the charge accumulation. A large value will increase accuracy but
take more time. If it is increased larger than 4, the size of the
Poisson simulation must be increased to match. [default: 3]</p></li>
<li><p><strong>nrecalc</strong> – The number of electrons to accumulate before recalculating the
distortion of the pixel shapes. [default: 10000]</p></li>
<li><p><strong>treering_func</strong> – A <a class="reference internal" href="table.html#galsim.LookupTable" title="galsim.LookupTable"><code class="xref any py py-class docutils literal notranslate"><span class="pre">LookupTable</span></code></a> giving the tree ring pattern f(r). [default: None]</p></li>
<li><p><strong>treering_center</strong> – A <a class="reference internal" href="pos.html#galsim.PositionD" title="galsim.PositionD"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PositionD</span></code></a> object with the center of the tree ring pattern in pixel
coordinates, which may be outside the pixel region. [default: None;
required if treering_func is provided]</p></li>
<li><p><strong>transpose</strong> – Transpose the meaning of (x,y) so the brighter-fatter effect is
stronger along the x direction. [default: False]</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="galsim.SiliconSensor.accumulate">
<code class="sig-name descname">accumulate</code><span class="sig-paren">(</span><em class="sig-param">photons</em>, <em class="sig-param">image</em>, <em class="sig-param">orig_center=galsim.PositionI(x=0</em>, <em class="sig-param">y=0)</em>, <em class="sig-param">resume=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sensor.html#SiliconSensor.accumulate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.SiliconSensor.accumulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Accumulate the photons incident at the surface of the sensor into the appropriate
pixels in the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photons</strong> – A <a class="reference internal" href="photon_array.html#galsim.PhotonArray" title="galsim.PhotonArray"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PhotonArray</span></code></a> instance describing the incident photons</p></li>
<li><p><strong>image</strong> – The <a class="reference internal" href="image_class.html#galsim.Image" title="galsim.Image"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Image</span></code></a> into which the photons should be accumuated.</p></li>
<li><p><strong>orig_center</strong> – The <a class="reference internal" href="pos.html#galsim.Position" title="galsim.Position"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Position</span></code></a> of the image center in the original image coordinates.
[default: (0,0)]</p></li>
<li><p><strong>resume</strong> – Resume accumulating on the same image as a previous call to accumulate.
This skips an initial (slow) calculation at the start of the
accumulation to see what flux is already on the image, which can
be more efficient, especially when the number of pixels is large.
[default: False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the total flux that fell onto the image.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galsim.SiliconSensor.calculate_pixel_areas">
<code class="sig-name descname">calculate_pixel_areas</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">orig_center=galsim.PositionI(x=0</em>, <em class="sig-param">y=0)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sensor.html#SiliconSensor.calculate_pixel_areas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.SiliconSensor.calculate_pixel_areas" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an image with the corresponding pixel areas according to the <a class="reference internal" href="#galsim.SiliconSensor" title="galsim.SiliconSensor"><code class="xref any py py-class docutils literal notranslate"><span class="pre">SiliconSensor</span></code></a>
model.</p>
<p>The input image gives the flux values used to set the current levels of the brighter-fatter
distortions.</p>
<p>The returned image will have the same size and bounds as the input image, and will have
for its flux values the net pixel area for each pixel according to the <a class="reference internal" href="#galsim.SiliconSensor" title="galsim.SiliconSensor"><code class="xref any py py-class docutils literal notranslate"><span class="pre">SiliconSensor</span></code></a>
model.</p>
<p>Note: The areas here are in units of the nominal pixel area.  This does not account for
any conversion from pixels to sky units using the image wcs (if any).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – The <a class="reference internal" href="image_class.html#galsim.Image" title="galsim.Image"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Image</span></code></a> with the current flux values.</p></li>
<li><p><strong>orig_center</strong> – The <a class="reference internal" href="pos.html#galsim.Position" title="galsim.Position"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Position</span></code></a> of the image center in the original image coordinates.
[default: (0,0)]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an <a class="reference internal" href="image_class.html#galsim.Image" title="galsim.Image"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Image</span></code></a> with the pixel areas</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galsim.SiliconSensor.simple_treerings">
<em class="property">classmethod </em><code class="sig-name descname">simple_treerings</code><span class="sig-paren">(</span><em class="sig-param">amplitude=0.5</em>, <em class="sig-param">period=100.0</em>, <em class="sig-param">r_max=8000.0</em>, <em class="sig-param">dr=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sensor.html#SiliconSensor.simple_treerings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.SiliconSensor.simple_treerings" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a simple sinusoidal tree ring pattern that can be used as the <code class="docutils literal notranslate"><span class="pre">treering_func</span></code>
parameter of <a class="reference internal" href="#galsim.SiliconSensor" title="galsim.SiliconSensor"><code class="xref any py py-class docutils literal notranslate"><span class="pre">SiliconSensor</span></code></a>.</p>
<p>The functional form is <span class="math notranslate nohighlight">\(f(r) = A \cos(2 \pi r/P)\)</span> where <span class="math notranslate nohighlight">\(A\)</span> is the
<code class="docutils literal notranslate"><span class="pre">amplitude</span></code> and <span class="math notranslate nohighlight">\(P\)</span> is the <code class="docutils literal notranslate"><span class="pre">period</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>amplitude</strong> – The amplitude of the tree ring pattern distortion.  Typically
this is less than 0.01 pixels. [default: 0.5]</p></li>
<li><p><strong>period</strong> – The period of the tree ring distortion pattern, in pixels.
[default: 100.]</p></li>
<li><p><strong>r_max</strong> – The maximum value of r to store in the lookup table. [default: 8000]</p></li>
<li><p><strong>dr</strong> – The spacing to use for the r values. [default: period/100]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="surface.html" class="btn btn-neutral float-right" title="Surface Operators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="photon_array.html" class="btn btn-neutral float-left" title="Photon Arrays" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, GalSim-developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>