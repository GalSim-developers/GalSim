{
"#" : "Demo #11",

"#" : "The eleventh JSON configuration file in our tutorial about using Galsim config files.",
"#" : "(This file is designed to be viewed in a window 100 characters wide.)",

"#" : "This script uses a constant PSF from real data (an image read in from a bzipped FITS file,",
"#" : "not a parametric model) and variable shear and magnification according to some cosmological",
"#" : "model for which we have a tabulated power spectrum at specific k values only.  The 288",
"#" : "galaxies in the 0.2 x 0.2 degree field (representing a low number density of 2/arcmin^2)",
"#" : "are randomly located and permitted to overlap, but we do take care to avoid being too close",
"#" : "to the edge of the large image.  For the galaxies, we use a random selection from 5",
"#" : "specific RealGalaxy objects, selected to be 5 particularly irregular ones. These are taken",
"#" : "from the same catalog of 100 objects that demo6 used.  We also use the whitening option to",
"#" : "remove the correlations in the noise originally present in the HST images.",

"#" : "See deom11.yaml for more extensive commentary about the features here.",

"eval_variables" : {
    "fpixel_scale" : 0.2,
    "atheta" : "0.17 degrees",
    "ftel_diam" : 4,
    "fexp_time" : 300
},

"psf" : {
    "type" : "InterpolatedImage",
    "image" : "data/example_sdss_psf_sky0.fits.bz2",
    "scale" : 0.2
},

"gal" : {
    "type" : "COSMOSGalaxy",
    "gal_type" : {
        "type" : "List",
        "items" : [ "parametric", "real" ],
        "index" : { "type" : "RandomBinomial", "N" : 1, "p" : 0.3 }
    },
    "noise_pad_size" : 11.3,
    "index" : { "type" : "Random" },
    "shear" : { "type" : "PowerSpectrumShear" },
    "magnification" : { "type" : "PowerSpectrumMagnification" },
    "rotation" : { "type" : "Random" },
    "scale_flux" : { "type" : "Eval", "str" : "(tel_diam**2 / (2.4**2*(1.-0.33**2))) * exp_time" }
},

"image" : {
    "type" : "Scattered",
    "size" : 1800,
    "nobjects" : 288,
    "index_convention" : 0,

    "noise" : { "type" : "Gaussian", "variance" : 50000.0, "symmetrize" : 8 },
    "random_seed" : 24783923,

    "wcs" : {
        "type" : "Tan",
        "dudx" : { "type" : "Eval", "str" : "math.cos(theta.rad()) * pixel_scale" },
        "dudy" : { "type" : "Eval", "str" : "-math.sin(theta.rad()) * pixel_scale" },
        "dvdx" : { "type" : "Eval", "str" : "math.sin(theta.rad()) * pixel_scale" },
        "dvdy" : { "type" : "Eval", "str" : "math.cos(theta.rad()) * pixel_scale" },
        "units" : "arcsec",
        "origin" : "center",
        "ra" : "19.3 hours",
        "dec" : "-33.1 degrees"
    },

    "draw_method" : "no_pixel",

    "nproc" : -1
},

"input" : {
    "cosmos_catalog" : {
        "dir" : "data",
        "file_name" : "real_galaxy_catalog_example.fits",
        "use_real" : "True"
    },

    "power_spectrum" : {
        "e_power_function" : "data/cosmo-fid.zmed1.00.out",
        "units" : "radians",
        "grid_spacing" : 90
    }
},

"output" : {
    "dir" : "output_json",
    "file_name" : "tabulated_power_spectrum.fits.fz"
}

}
